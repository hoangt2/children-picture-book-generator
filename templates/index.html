<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Children's Story Book Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1 data-i18n="appTitle">Children's Story Book Generator</h1>
            <p data-i18n="appSubtitle">Create magical stories for children aged 3-6 with AI.</p>
            <div class="header-controls">
                <div class="control-group">
                    <span class="lang-label">EN</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="languageToggle" checked>
                        <span class="slider round"></span>
                    </label>
                    <span class="lang-label">VN</span>
                </div>
                <div class="control-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="testModeToggle" checked>
                        <span class="slider round"></span>
                    </label>
                    <span class="toggle-label" data-i18n="testMode">Test Mode</span>
                </div>
            </div>
        </header>

        <main>
            <div class="wizard-container">
                <!-- Progress Stepper -->
                <div class="stepper">
                    <div class="step active" data-step="1" data-i18n="step1">1. Setup</div>
                    <div class="step" data-step="2" data-i18n="step2">2. Hero</div>
                    <div class="step" data-step="3" data-i18n="step3">3. Sidekick</div>
                    <div class="step" data-step="4" data-i18n="step4">4. Mission</div>
                    <div class="step" data-step="5" data-i18n="step5">5. Setting</div>
                </div>

                <!-- Wizard Content -->
                <div id="wizardContent" class="wizard-content">
                    <!-- Dynamic content injected by JS -->
                </div>

                <!-- Navigation -->
                <div class="wizard-nav">
                    <button id="backBtn" class="secondary-btn hidden" onclick="prevStep()"
                        data-i18n="backBtn">Back</button>
                    <button id="nextBtn" class="primary-btn" onclick="nextStep()" data-i18n="nextBtn">Next</button>
                    <button id="generateBtn" class="primary-btn hidden" onclick="startGeneration()">
                        <span class="icon">âœ¨</span> <span data-i18n="createStoryBtn">Create Story</span>
                    </button>
                </div>
            </div>

            <!-- Progress Section -->
            <div id="progressContainer" class="progress-container hidden">
                <h2 data-i18n="creatingStory">Creating Your Story...</h2>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p id="logMessage" class="log-message">Initializing...</p>
            </div>

            <!-- Book Viewer -->
            <div id="bookContainer" class="book-container hidden">
                <div class="book-viewer">
                    <button id="prevBtn" class="nav-btn" onclick="prevPage()">â—€</button>
                    <div id="currentPageContainer" class="page-display">
                        <!-- Page image will be inserted here -->
                    </div>
                    <button id="nextBtn" class="nav-btn" onclick="nextPage()">â–¶</button>
                </div>
                <div class="page-indicator">
                    <span data-i18n="page">Page</span> <span id="pageNum">1</span> <span data-i18n="of">of</span> <span
                        id="totalPages">8</span>
                </div>
                <button class="start-over-btn" onclick="startOver()">âœ¨ <span data-i18n="createAnotherBtn">Create Another
                        Story</span></button>
            </div>

            <!-- Download Section -->
            <div id="downloadSection" class="download-section hidden">
                <a href="/output/story.pdf" target="_blank" class="download-btn">
                    <span data-i18n="downloadPdf">Download PDF Book</span> ðŸ“¥
                </a>
                <button onclick="archiveStory()" class="secondary-btn">
                    <span data-i18n="saveArchive">Save to Archive</span> ðŸ’¾
                </button>
            </div>
        </main>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}?v=7"></script>
</body>

</html>